NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA.
NOTE: SAS (r) Proprietary Software 9.4 (TS1M2 DBCS3170)
      Licensed to NATIONAL HOSPITAL ORG NAGOYA MEDICAL CENTER, Site 10206901.
NOTE: このセッションはX64_8PRO プラットフォーム上で実行されています。



NOTE: Updated analytical products:

      SAS/STAT 13.2
      SAS/IML 13.2

NOTE: Additional host information:

 X64_8PRO WIN 6.2.9200  Workstation

NOTE: SASシステム初期化処理:
      処理時間           3.86 秒
      CPU時間            3.29 秒

1    **********************************************************************;
2    * Project           : JACLS-ALL02
3    *
4    * Program name      : JACLS-ALL02_SDTM_RS.sas
5    *
6    * Author            : MATSUO YAMAMOTO
7    *
8    * Date created      : 20170330
9    *
10   * Purpose           : Create RS DataSet
11   *
12   * Revision History  :
13   *
14   * Date        Author           Ref    Revision (Date in YYYYMMDD format)
15   *
16   *
17   **********************************************************************;
18
19   /*** Initial setting ***/
20   %MACRO CURRENT_DIR;
21
22       %LOCAL _FULLPATH _PATH;
23       %LET   _FULLPATH = ;
24       %LET   _PATH     = ;
25
26       %IF %LENGTH(%SYSFUNC(GETOPTION(SYSIN))) = 0 %THEN
27           %LET _FULLPATH = %SYSGET(SAS_EXECFILEPATH);
28       %ELSE
29           %LET _FULLPATH = %SYSFUNC(GETOPTION(SYSIN));
30
31       %LET _PATH = %SUBSTR(   &_FULLPATH., 1, %LENGTH(&_FULLPATH.)
32                             - %LENGTH(%SCAN(&_FULLPATH.,-1,'\')) -1 );
33
34       &_PATH.
35
36   %MEND CURRENT_DIR;
37
38   %LET _PATH2 = %CURRENT_DIR;
39   %LET FILE = rs;
40
41   %INCLUDE "&_PATH2.\JACLS-ALL02_SDTM_LIBNAME.sas";
NOTE: WORK.SASMACR (memtype=CATALOG)を削除します。
NOTE: ファイルWORK.SASMACR (memtype=CATALOG)は使用中なので削除できません。

NOTE: PROCEDURE DATASETS処理(合計処理時間):
      処理時間           0.19 秒
      CPU時間            0.15 秒


NOTE: ライブラリ参照名LIBRAWを次のように割り当てました。
      エンジン: V9
      物理名: C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\input\rawdata
NOTE: ライブラリ参照名LIBEXTを次のように割り当てました。
      エンジン: V9
      物理名: C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\input\ext
NOTE: ライブラリ参照名LIBSDTMを次のように割り当てました。
      エンジン: V9
      物理名: C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\output\sdtm
102
103  /*** CSV read ***/
104  PROC IMPORT OUT= MAIN
105    DATAFILE="&RAW.\ALL-02_OSEFSdata v1.csv"
106    DBMS=CSV REPLACE;
107    GETNAMES=NO;
108    DATAROW=1;
109    GUESSINGROWS=5000;
110  RUN;

111   /**********************************************************************
112   *   プロダクト:   SAS
113   *   バージョン:   9.4
114   *   作成者:   外部ファイルインターフェイス
115   *   作成日:      30MAR17
116   *   説明:      生成された SAS データステップコード
117   *   テンプレート ソース:  (指定なし)
118   ***********************************************************************/
119      data WORK.MAIN    ;
120      %let _EFIERR_ = 0; /* エラー検出のマクロ変数を設定します */
121      infile
121! 'C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\input\rawdata\ALL-02_OSEFSdat
121! a v1.csv' delimiter = ',' MISSOVER DSD lrecl=32767 ;
122         informat VAR1 $3. ;
123         informat VAR2 $18. ;
124         informat VAR3 best32. ;
125         informat VAR4 best32. ;
126         informat VAR5 $2. ;
127         informat VAR6 $2. ;
128         informat VAR7 $2. ;
129         informat VAR8 $1. ;
130         informat VAR9 yymmdd10. ;
131         informat VAR10 best32. ;
132         informat VAR11 $10. ;
133         informat VAR12 best32. ;
134         informat VAR13 $2. ;
135         informat VAR14 yymmdd10. ;
136         informat VAR15 yymmdd10. ;
137         informat VAR16 yymmdd10. ;
138         informat VAR17 best32. ;
139         informat VAR18 $8. ;
140         informat VAR19 $83. ;
141         informat VAR20 $314. ;
142         informat VAR21 best32. ;
143         informat VAR22 $4. ;
144         informat VAR23 best32. ;
145         informat VAR24 $24. ;
146         informat VAR25 yymmdd10. ;
147         informat VAR26 yymmdd10. ;
148         informat VAR27 $358. ;
149         informat VAR28 $25. ;
150         informat VAR29 $8. ;
151         informat VAR30 yymmdd10. ;
152         informat VAR31 best32. ;
153         informat VAR32 yymmdd10. ;
154         informat VAR33 best32. ;
155         informat VAR34 yymmdd10. ;
156         informat VAR35 best32. ;
157         informat VAR36 yymmdd10. ;
158         informat VAR37 best32. ;
159         informat VAR38 yymmdd10. ;
160         informat VAR39 best32. ;
161         informat VAR40 yymmdd10. ;
162         informat VAR41 $81. ;
163         informat VAR42 best32. ;
164         informat VAR43 $8. ;
165         informat VAR44 yymmdd10. ;
166         informat VAR45 best32. ;
167         informat VAR46 $40. ;
168         informat VAR47 yymmdd10. ;
169         informat VAR48 best32. ;
170         informat VAR49 $8. ;
171         informat VAR50 yymmdd10. ;
172         informat VAR51 yymmdd10. ;
173         informat VAR52 best32. ;
174         informat VAR53 $4. ;
175         informat VAR54 yymmdd10. ;
176         informat VAR55 $17. ;
177         informat VAR56 best32. ;
178         informat VAR57 $8. ;
179         informat VAR58 $100. ;
180         informat VAR59 $536. ;
181         format VAR1 $3. ;
182         format VAR2 $18. ;
183         format VAR3 best12. ;
184         format VAR4 best12. ;
185         format VAR5 $2. ;
186         format VAR6 $2. ;
187         format VAR7 $2. ;
188         format VAR8 $1. ;
189         format VAR9 yymmdd10. ;
190         format VAR10 best12. ;
191         format VAR11 $10. ;
192         format VAR12 best12. ;
193         format VAR13 $2. ;
194         format VAR14 yymmdd10. ;
195         format VAR15 yymmdd10. ;
196         format VAR16 yymmdd10. ;
197         format VAR17 best12. ;
198         format VAR18 $8. ;
199         format VAR19 $83. ;
200         format VAR20 $314. ;
201         format VAR21 best12. ;
202         format VAR22 $4. ;
203         format VAR23 best12. ;
204         format VAR24 $24. ;
205         format VAR25 yymmdd10. ;
206         format VAR26 yymmdd10. ;
207         format VAR27 $358. ;
208         format VAR28 $25. ;
209         format VAR29 $8. ;
210         format VAR30 yymmdd10. ;
211         format VAR31 best12. ;
212         format VAR32 yymmdd10. ;
213         format VAR33 best12. ;
214         format VAR34 yymmdd10. ;
215         format VAR35 best12. ;
216         format VAR36 yymmdd10. ;
217         format VAR37 best12. ;
218         format VAR38 yymmdd10. ;
219         format VAR39 best12. ;
220         format VAR40 yymmdd10. ;
221         format VAR41 $81. ;
222         format VAR42 best12. ;
223         format VAR43 $8. ;
224         format VAR44 yymmdd10. ;
225         format VAR45 best12. ;
226         format VAR46 $40. ;
227         format VAR47 yymmdd10. ;
228         format VAR48 best12. ;
229         format VAR49 $8. ;
230         format VAR50 yymmdd10. ;
231         format VAR51 yymmdd10. ;
232         format VAR52 best12. ;
233         format VAR53 $4. ;
234         format VAR54 yymmdd10. ;
235         format VAR55 $17. ;
236         format VAR56 best12. ;
237         format VAR57 $8. ;
238         format VAR58 $100. ;
239         format VAR59 $536. ;
240      input
241                  VAR1 $
242                  VAR2 $
243                  VAR3
244                  VAR4
245                  VAR5 $
246                  VAR6 $
247                  VAR7 $
248                  VAR8 $
249                  VAR9
250                  VAR10
251                  VAR11 $
252                  VAR12
253                  VAR13 $
254                  VAR14
255                  VAR15
256                  VAR16
257                  VAR17
258                  VAR18 $
259                  VAR19 $
260                  VAR20 $
261                  VAR21
262                  VAR22 $
263                  VAR23
264                  VAR24 $
265                  VAR25
266                  VAR26
267                  VAR27 $
268                  VAR28 $
269                  VAR29 $
270                  VAR30
271                  VAR31
272                  VAR32
273                  VAR33
274                  VAR34
275                  VAR35
276                  VAR36
277                  VAR37
278                  VAR38
279                  VAR39
280                  VAR40
281                  VAR41 $
282                  VAR42
283                  VAR43 $
284                  VAR44
285                  VAR45
286                  VAR46 $
287                  VAR47
288                  VAR48
289                  VAR49 $
290                  VAR50
291                  VAR51
292                  VAR52
293                  VAR53 $
294                  VAR54
295                  VAR55 $
296                  VAR56
297                  VAR57 $
298                  VAR58 $
299                  VAR59 $
300      ;
301      if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
302      run;

NOTE: 入力ファイル'C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\input\rawdata\AL
      L-02_OSEFSdata v1.csv' :

      ファイル名=C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\input\rawdata\ALL-
      02_OSEFSdata v1.csv,
      レコードフォーマット=V,論理レコード長=32767,
      ファイルサイズ (バイト)=239443,
      更新日時=2017年01月18日 14時09分06秒,
      作成日時=2017年03月30日 13時10分19秒

NOTE: 1252レコードを入力ファイル'C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\in
      put\rawdata\ALL-02_OSEFSdata v1.csv'から読み込みました。
      最小レコード長は119です。
      最大レコード長は789です。
NOTE: データセットWORK.MAINは1252オブザベーション、59変数です。
NOTE: DATAステートメント処理(合計処理時間):
      処理時間           0.66 秒
      CPU時間            0.59 秒


1252 行が WORK.MAIN に
C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\input\rawdata\ALL-02_OSEFSdata
v1.csv から作成されました。



NOTE: WORK.MAINデータセットが正常に作成されました。
NOTE: データセットWORK.MAINは1252オブザベーション、59変数です。
NOTE: PROCEDURE IMPORT処理(合計処理時間):
      処理時間           6.16 秒
      CPU時間            5.78 秒


303
304  /*** Extraction of mapping target ***/
305  DATA  WK01;
306    SET  MAIN;
307    IF  VAR1 = "0"; ***Eligibility only ;
308  RUN ;

NOTE: データセットWORK.MAINから1252オブザベーションを読み込みました。
NOTE: データセットWORK.WK01は1245オブザベーション、59変数です。
NOTE: DATAステートメント処理(合計処理時間):
      処理時間           0.05 秒
      CPU時間            0.04 秒


309
310  /*** Mapping ***/
311  DATA  WK02;
312    LENGTH RSORRES RSSTRESC $20.;
313    SET  WK01;
314    STUDYID = "JACLS-ALL02";
315    DOMAIN = "RS";
316    USUBJID = COMPRESS(STUDYID)||"-"||COMPRESS(PUT(VAR3,Z4.));
317    RSTESTCD = "CLINRESP";
318    RSTEST = "Clinical Response";
319    RSCAT = "DEFINED BY PROTOCOL";
320    IF  VAR18 = "有" THEN RSORRES = "CR";
321    ELSE IF VAR18 = "無" THEN RSORRES = "NR";
322    ELSE RSORRES = "NE";
323    RSSTRESC = COMPRESS(RSORRES);
324  RUN ;

NOTE: データセットWORK.WK01から1245オブザベーションを読み込みました。
NOTE: データセットWORK.WK02は1245オブザベーション、67変数です。
NOTE: DATAステートメント処理(合計処理時間):
      処理時間           0.08 秒
      CPU時間            0.07 秒


325
326  PROC SORT DATA=WK02 ;BY USUBJID ; RUN ;

NOTE: データセットWORK.WK02から1245オブザベーションを読み込みました。
NOTE: データセットWORK.WK02は1245オブザベーション、67変数です。
NOTE: PROCEDURE SORT処理(合計処理時間):
      処理時間           0.06 秒
      CPU時間            0.04 秒


327
328  DATA  WK10;
329    SET  WK02;
330    RETAIN RSSEQ;
331    BY  USUBJID;
332    IF FIRST.USUBJID = 1 THEN RSSEQ = 0;
333    RSSEQ = RSSEQ + 1;
334  RUN ;

NOTE: データセットWORK.WK02から1245オブザベーションを読み込みました。
NOTE: データセットWORK.WK10は1245オブザベーション、68変数です。
NOTE: DATAステートメント処理(合計処理時間):
      処理時間           0.05 秒
      CPU時間            0.04 秒


335
336  PROC SQL ;
337     CREATE TABLE LIBSDTM.&FILE AS
338     SELECT
339      STUDYID  LENGTH=20    LABEL="Study Identifier",
340      DOMAIN  LENGTH=2    LABEL="Domain Abbreviation",
341      USUBJID  LENGTH=40    LABEL="Unique Subject Identifier",
342      RSSEQ      LABEL="Sequence Number",
343      RSTESTCD  LENGTH=8    LABEL="Response Assessment Short Name",
344      RSTEST  LENGTH=40    LABEL="Response Assessment Name",
345      RSCAT  LENGTH=40    LABEL="Category for Response Assessment",
346      RSORRES  LENGTH=200    LABEL="Response Assessment Original Result",
347      RSSTRESC  LENGTH=200    LABEL="Character Result/Finding in Std Format"
348     FROM WK10;
NOTE: テーブルLIBSDTM.RS(行数1245、列数9)が作成されました。

349  QUIT ;
NOTE: PROCEDURE SQL処理(合計処理時間):
      処理時間           0.07 秒
      CPU時間            0.07 秒


350
351  FILENAME OUTF "&OUTPUT.\&FILE..csv" ;
352
353  PROC EXPORT DATA=LIBSDTM.&FILE. OUTFILE=OUTF
354    DBMS=CSV REPLACE;
355  RUN ;

356   /**********************************************************************
357   *   プロダクト:   SAS
358   *   バージョン:   9.4
359   *   作成者:   外部ファイルインターフェイス
360   *   作成日:      30MAR17
361   *   説明:      生成された SAS データステップコード
362   *   テンプレート ソース:  (指定なし)
363   ***********************************************************************/
364      data _null_;
365      %let _EFIERR_ = 0; /* エラー検出のマクロ変数を設定します */
366      %let _EFIREC_ = 0;     /* エクスポートレコードカウントのマクロ変数をクリアします */
367      file OUTF delimiter=',' DSD DROPOVER ;
368      if _n_ = 1 then        /* 列名またはラベルを書き出します */
369       do;
370         put
371            "STUDYID"
372         ','
373            "DOMAIN"
374         ','
375            "USUBJID"
376         ','
377            "RSSEQ"
378         ','
379            "RSTESTCD"
380         ','
381            "RSTEST"
382         ','
383            "RSCAT"
384         ','
385            "RSORRES"
386         ','
387            "RSSTRESC"
388         ;
389       end;
390     set  LIBSDTM.RS   end=EFIEOD;
391         format STUDYID $20. ;
392         format DOMAIN $2. ;
393         format USUBJID $40. ;
394         format RSSEQ best12. ;
395         format RSTESTCD $8. ;
396         format RSTEST $40. ;
397         format RSCAT $40. ;
398         format RSORRES $200. ;
399         format RSSTRESC $200. ;
400       do;
401         EFIOUT + 1;
402         put STUDYID $ @;
403         put DOMAIN $ @;
404         put USUBJID $ @;
405         put RSSEQ @;
406         put RSTESTCD $ @;
407         put RSTEST $ @;
408         put RSCAT $ @;
409         put RSORRES $ @;
410         put RSSTRESC $ ;
411         ;
412       end;
413      if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
414      if EFIEOD then call symputx('_EFIREC_',EFIOUT);
415      run;

NOTE: 出力ファイルOUTF :
      ファイル名=C:\Users\MatsuoYamamoto\Desktop\GitHub\knonc_mapping\JACLS-ALL02\output\sdtm\rs.csv
      ,
      レコードフォーマット=V,論理レコード長=32767,
      ファイルサイズ (バイト)=0,
      更新日時=2017年03月30日 14時26分54秒,
      作成日時=2017年03月30日 14時26分54秒

NOTE: 1246レコードを出力ファイルOUTFに書き込みました。
      最小レコード長は67です。
      最大レコード長は86です。
NOTE: データセットLIBSDTM.RSから1245オブザベーションを読み込みました。
NOTE: DATAステートメント処理(合計処理時間):
      処理時間           0.26 秒
      CPU時間            0.21 秒


1245 レコードが OUTF に LIBSDTM.RS から作成されました。


NOTE: "OUTF" ファイルが正常に作成されました。
NOTE: PROCEDURE EXPORT処理(合計処理時間):
      処理時間           0.53 秒
      CPU時間            0.42 秒


416
417  %SDTM_FIN;

NOTE: DATAステートメント処理(合計処理時間):
      処理時間           0.00 秒
      CPU時間            0.01 秒


